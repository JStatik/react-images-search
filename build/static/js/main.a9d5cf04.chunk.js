(this["webpackJsonpimages-search"]=this["webpackJsonpimages-search"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(29),s=a.n(c),i=(a(37),a(38),a(3)),o=a(14),l=a.n(o),u=a(30),j=function(e,t,a){var r=Object(n.useRef)(!0),c=Object(n.useState)({data:[],totalPages:1,loading:!0,error:null}),s=Object(i.a)(c,2),o=s[0],j=s[1];return Object(n.useEffect)((function(){return function(){r.current=!1}}),[]),Object(n.useEffect)((function(){j({data:[],totalPages:1,loading:!0,error:null}),function(){var n=Object(u.a)(l.a.mark((function n(){var c,s,i,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=12,s="https://pixabay.com/api/?key=12407256-74c23a8e7869156a9f8ac0334&q=".concat(encodeURI(t),"&per_page=").concat(c,"&page=").concat(a),n.next=5,fetch(s);case 5:return i=n.sent,n.next=8,i.json();case 8:(o=n.sent).hits.length>0?r.current&&j({data:o.hits,totalPages:Math.ceil(o.totalHits/c),loading:!1,error:null}):r.current&&j({data:[],totalPages:1,loading:!1,error:"No se encontraron resultados, intente nuevamente."}),e.scrollIntoView({behavior:"smooth"}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),j({data:[],totalPages:1,loading:!1,error:n.t0});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}()()}),[e,t,a]),o},b=a(1),d=function(e){var t=e.error;return Object(b.jsx)("div",{className:"container-error",children:Object(b.jsx)("p",{children:t})})},m=function(e){var t=e.likes,a=e.views;return Object(b.jsxs)("div",{className:"row card-body",children:[Object(b.jsx)("div",{className:"col-6 text-center p-0 border-right-card",children:Object(b.jsxs)("span",{children:[Object(b.jsx)("i",{className:"fas fa-thumbs-up"})," ",t]})}),Object(b.jsx)("div",{className:"col-6 text-center p-0",children:Object(b.jsxs)("span",{children:[Object(b.jsx)("i",{className:"fas fa-eye"})," ",a]})})]})},O=function(e){var t=e.image;return Object(b.jsx)("div",{className:"card-footer text-center",children:Object(b.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:"Ver imagen"})})},g=function(e){var t=e.image,a=e.name;return Object(b.jsx)("img",{src:t,alt:a,className:"card-img-top",height:"150"})},f=function(e){var t=e.image,a=t.largeImageURL,n=t.likes,r=t.tags,c=t.views;return Object(b.jsx)("div",{className:"col-sm-6 col-md-4 col-lg-3 p-3",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)(g,{image:a,name:r}),Object(b.jsx)(m,{likes:n,views:c}),Object(b.jsx)(O,{image:a})]})})},h=a(7),x=a.n(h),v=a(31),p=a(15),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(i.a)(t,2),r=a[0],c=a[1],s=function(e){c(Object(p.a)(Object(p.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)};return[r,s,o]},P=function(e){return e.trim().length<2||x.a.isEmpty(e)||!x.a.isAlpha(e,["es-ES"],{ignore:" "})?{errorImages:"Ingrese una imagen v\xe1lida para su b\xfasqueda.",isValid:!1}:{errorImages:null,isValid:!0}},C=function(e){var t=e.images,a=e.handleInputChange,n=e.error;return Object(b.jsxs)("div",{className:"form-group col-md-7 offset-md-1",children:[Object(b.jsx)("input",{type:"text",className:"form-control ".concat(n&&"is-invalid"),placeholder:"Buscar im\xe1genes...",name:"images",value:t,onChange:a}),Object(b.jsx)("div",{className:"invalid-feedback",children:n})]})},y=r.a.memo((function(e){var t=e.disabled;return Object(b.jsx)("div",{className:"form-group col-md-3",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:t,children:"Buscar"})})})),k=function(e){var t=e.setQuery,a=e.setCurrentPage,r=N({images:""}),c=Object(i.a)(r,3),s=c[0],o=c[1],l=c[2],u=s.images,j=Object(n.useState)(null),d=Object(i.a)(j,2),m=d[0],O=d[1],g=Object(n.useState)(!1),f=Object(i.a)(g,2),h=f[0],v=f[1];return Object(b.jsx)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),v(!0);var n=x.a.escape(u),r=P(n),c=r.errorImages,s=r.isValid;O(c),s&&(t(n),a(1),l()),v(!1)},children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)(C,{images:u,handleInputChange:o,error:m||""}),Object(b.jsx)(y,{disabled:h})]})})},w=function(){return Object(b.jsx)("div",{className:"container-spinner",children:Object(b.jsxs)("div",{className:"spinner",children:[Object(b.jsx)("div",{className:"rect1"}),Object(b.jsx)("div",{className:"rect2"}),Object(b.jsx)("div",{className:"rect3"}),Object(b.jsx)("div",{className:"rect4"}),Object(b.jsx)("div",{className:"rect5"})]})})},S=a(32),I=function(e){var t=e.numberButton,a=e.currentPage,n=e.setCurrentPage;return Object(b.jsx)("li",{className:"page-item ".concat(a===t&&"active"),children:Object(b.jsx)("button",{type:"button",className:"page-link",onClick:function(){return n(t)},children:t})})},E=function(e){var t=e.totalPages,a=e.currentPage,n=e.setCurrentPage;return Object(b.jsx)("li",{className:"page-item ".concat(a===t&&"disabled"),children:Object(b.jsx)("button",{type:"button",className:"page-link",onClick:function(){return n(a+1)},children:Object(b.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})},B=function(e){var t=e.currentPage,a=e.setCurrentPage;return Object(b.jsx)("li",{className:"page-item ".concat(1===t&&"disabled"),children:Object(b.jsx)("button",{type:"button",className:"page-link",onClick:function(){return a(t-1)},children:Object(b.jsx)("span",{"aria-hidden":"true",children:"\xab"})})})},R=function(e){var t=e.totalPages,a=e.currentPage,r=e.setCurrentPage,c=Object(n.useState)((function(){return t<5||a-2<1?1:a+4>t?t-4:a-2})),s=Object(i.a)(c,1)[0],o=Object(n.useState)((function(){return t<5||a+4>t?t:a+2<5?5:a+2})),l=Object(i.a)(o,1)[0],u=Object(n.useState)([]),j=Object(i.a)(u,2),d=j[0],m=j[1];return Object(n.useEffect)((function(){for(var e=function(e){m((function(t){return[].concat(Object(S.a)(t),[e])}))},t=s;t<=l;t++)e(t)}),[s,l]),Object(b.jsx)("nav",{className:"mt-3",children:Object(b.jsxs)("ul",{className:"pagination",children:[Object(b.jsx)(B,{currentPage:a,setCurrentPage:r}),d.map((function(e){return Object(b.jsx)(I,{numberButton:e,currentPage:a,setCurrentPage:r},e)})),Object(b.jsx)(E,{totalPages:t,currentPage:a,setCurrentPage:r})]})})},V=r.a.memo((function(){return Object(b.jsx)("p",{className:"lead text-center",children:"BUSCADOR DE IM\xc1GENES"})})),D=function(){var e=Object(n.useRef)(),t=Object(n.useState)("Colombia"),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(1),o=Object(i.a)(s,2),l=o[0],u=o[1],m=j(e.current,r,l),O=m.data,g=m.totalPages,h=m.loading,x=m.error;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("div",{className:"mt-3 p-3 bg-secondary shadow",ref:e,children:[Object(b.jsx)(V,{}),Object(b.jsx)(k,{setQuery:c,setCurrentPage:u})]}),h?Object(b.jsx)(w,{}):x?Object(b.jsx)(d,{error:"No se encontraron resultados, intente nuevamente."}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"row justify-content-center",children:O.map((function(e){return Object(b.jsx)(f,{image:e},e.id)}))}),Object(b.jsx)("div",{className:"row justify-content-center",children:Object(b.jsx)(R,{totalPages:g,currentPage:l,setCurrentPage:u})})]})]})};s.a.render(Object(b.jsx)(D,{}),document.getElementById("root"))},38:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.a9d5cf04.chunk.js.map